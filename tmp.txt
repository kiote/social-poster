class User < ActiveRecord::Base
  has_many :services
  has_many :authorisations
  attr_accessible :name, :email
end


class Service < ActiveRecord::Base
  belongs_to :user

  attr_accessible :provider, :uid, :uname, :uemail
end

    #~ @authorisation = Authorisation.find_by_provider_and_uid(auth_hash["provider"], auth_hash["uid"])
    #~ 
    #~ if @authorisation
      #~ render :text => "Welcome back #{@authorisation.user.name}! You have already signed up."
    #~ else
      #~ # TODO: correct parameters
      #~ user = User.new :name => auth_hash['extra']['raw_info']["name"], :email => auth_hash['extra']['raw_info']["email"]
      #~ user.authorisations.build :provider => auth_hash["provider"], :uid => auth_hash["uid"]
      #~ user.save
      #~ 
      #~ render :text => "Hi #{user.name}! You've signed up."
    #~ end



%p
  #{link_to "signin with twitter", "/auth/twitter"}
%p
  #{link_to "signin with facebook", "/auth/facebook"}
%p
  #{link_to "signin with linkedin", "/auth/linkedin"}
%p
  #{link_to "signin with vkontakte", "/auth/vkontakte"}
